# 养猫 (Cat Bar) - 设计文档

## 核心概念

**应用名称**：养猫（Cat Bar / 猫栏）

**一句话描述**：一只住在 Mac 状态栏里的像素小猫，通过完成番茄钟专注来喂养它。

**核心玩法**：
- 小猫在状态栏从左到右来回奔跑（侧面视角，能看到四条腿运动的动画）
- 用户开启番茄钟进入专注模式，倒计时显示在状态栏
- 专注完成后，状态栏出现食物图标，用户点击喂食
- 猫咪有饥饿值，长时间不喂会变饿：动作变慢、表情变委屈
- 累积专注时间可解锁新猫咪和装饰品

**技术选型**：Swift + SwiftUI，原生 macOS 菜单栏应用

---

## 猫咪系统

**猫咪状态**：
- **饱食度**：0-100%，随时间缓慢下降
  - 100%-70%：活泼状态，正常速度奔跑
  - 70%-30%：普通状态，速度略慢
  - 30%-0%：饥饿状态，走得很慢，表情委屈

**猫咪动画帧**（侧面像素风）：
- 奔跑动画：4-6帧循环，腿部交替运动
- 待机动画：偶尔眨眼、甩尾巴
- 吃东西动画：低头进食
- 饥饿动画：缓慢移动 + 委屈表情

**解锁收集**：
- 初始：橘猫
- 累积专注 5 小时：解锁黑猫
- 累积专注 15 小时：解锁白猫
- 累积专注 30 小时：解锁奶牛猫
- 后续可扩展更多猫咪和装饰品

---

## 番茄钟系统

**启动专注**：
- 点击状态栏猫咪，弹出菜单
- 选择专注时长：15 / 25 / 45 / 60 分钟（可自定义）
- 点击"开始专注"，倒计时开始

**专注中状态**：
- 状态栏显示：猫咪 + 倒计时
- 猫咪正常奔跑，表示"主人在努力，我也在陪伴"
- 可随时点击取消（但不获得食物奖励）

**专注完成**：
- 系统通知弹出："专注完成！猫咪的食物准备好了~"
- 播放"喵~"音效（可在设置中关闭）
- 状态栏出现食物图标
- 用户点击食物图标 → 猫咪播放吃东西动画 → 饱食度恢复

**食物价值**：
- 15 分钟专注 = 小零食，恢复 15% 饱食度
- 25 分钟专注 = 正餐，恢复 25% 饱食度
- 45/60 分钟专注 = 大餐，恢复 40%/50% 饱食度

---

## 统计与设置

**统计面板**：

- **今日概览**：今日专注时长、完成番茄钟数量、连续专注天数

- **图表展示**：
  - 每日柱状图：过去 7 天每天的专注时长
  - 每周趋势：过去 4 周的专注总时长
  - 每月热力图：类似 GitHub 贡献图

- **历史记录**：累计总专注时长、累计番茄钟数量、最长连续天数

**设置选项**：
- 通知开关
- 音效开关
- 自定义时长
- 切换猫咪

---

## 技术架构

**应用结构**：
```
CatBar.app
├── 状态栏组件（NSStatusBar）
│   ├── 猫咪动画视图
│   ├── 倒计时显示
│   └── 食物图标
├── 下拉菜单
│   ├── 开始专注（时长选择）
│   ├── 统计
│   ├── 设置
│   └── 退出
└── 独立窗口
    ├── 统计面板
    └── 设置面板
```

**数据存储**（本地 UserDefaults + JSON）：
- 猫咪状态：当前猫咪、饱食度、上次喂食时间
- 专注记录：每次专注的开始时间、时长、是否完成
- 解锁进度：累计专注时长、已解锁猫咪列表
- 用户设置：通知/音效开关、自定义时长列表

**素材需求**：
- 像素猫咪精灵图
- 食物图标
- 应用图标
- 音效文件
